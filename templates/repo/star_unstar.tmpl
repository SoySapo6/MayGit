<form hx-boost="true" hx-target="this" method="post" action="{{$.RepoLink}}/action/{{if $.IsStaringRepo}}unstar{{else}}star{{end}}">
	<div class="ui labeled button" {{if not $.IsSigned}}data-tooltip-content="{{ctx.Locale.Tr "repo.star_guest_user"}}"{{end}}>
		{{$buttonText := ctx.Locale.Tr "repo.star"}}
		{{if $.IsStaringRepo}}{{$buttonText = ctx.Locale.Tr "repo.unstar"}}{{end}}
		<button type="submit" class="ui compact small basic button"{{if not $.IsSigned}} disabled{{end}} aria-label="{{$buttonText}}">
			{{svg (Iif $.IsStaringRepo "octicon-star-fill" "octicon-star")}}
			<span aria-hidden="true">{{$buttonText}}</span>
			<span class="ui small label">{{CountFmt .Repository.NumStars}}</span>
		</button>
		{{if and .IsSigned (gt .ContextUser.ID 0)}}
		<a class="ui basic label muted show-modal" data-modal="#choose-star-list" data-modal-modal-form.action="{{AppSubUrl}}/stars/lists">
			{{svg "octicon-triangle-down"}}
		</a>
		{{else}}
		<a class="ui basic label">
			{{svg "octicon-triangle-down"}}
		</a>
		{{end}}
	</div>
</form>

{{template "shared/star_list_dialog" .}}
